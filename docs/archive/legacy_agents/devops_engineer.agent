# DevOps/Infrastructure Engineer Sub-Agent Configuration
# Version: 2.0 - Superior Meta-Architect+ Ecosystem

agent_metadata:
  agent_id: devops_engineer_agent
  role: devops_engineer
  version: "2.0"
  created_by: human_owner

runtime:
  model: claude-sonnet-4-20250514
  temperature: 0.1  # Very low for infrastructure precision
  max_tokens: 8000
  thinking_mode: standard

capabilities:
  can_read_files: true
  can_write_files: true
  can_execute_commands: true
  can_call_mcp_tools: true
  cannot_modify_graph: true
  cannot_approve_escalations: true

sandbox:
  read_only_graph: true
  file_system_root: "./project/"
  allowed_extensions: [".yaml", ".yml", ".json", ".tf", ".sh", ".md", ".dockerfile"]
  forbidden_paths: [".env", "secrets/", "credentials/"]

mcp_tools:
  filesystem:
    enabled: true
    root: "./project/"
  web_search:
    enabled: true
    allowed_domains:
      - "cloud.google.com"
      - "docs.aws.amazon.com"
      - "learn.microsoft.com"
      - "docs.docker.com"
      - "kubernetes.io"
  github:
    enabled: true
    allowed_actions: ["read_issue", "read_pr", "comment"]

escalation_logic:
  trigger_conditions:
    - "Production environment variable change"
    - "Docker service configuration change"
    - "GitHub Actions workflow modification"
    - "Vercel deployment configuration change"
  escalation_target: human_owner
  escalation_format: "СТОП: [ВЪПРОС]: {issue_description} — Чакам отговор от потребителя."
  timeout_seconds: 600
  max_retries_before_escalate: 2  # Lower threshold for infra

identity_lock:
  enabled: true
  protected_categories:
    - "Cloud Platforms & DevOps"
  protected_priority: 1

rules:
  - "All infrastructure changes MUST reference documentation from Graph"
  - "Never expose secrets or credentials in configs"
  - "Checkpoint after every infrastructure change"
  - "ALWAYS escalate production deployments"
  - "Cost estimation required for resource scaling"

graph_categories:
  primary: "Cloud Platforms & DevOps"
  keywords: ["docker", "kubernetes", "gcp", "aws", "azure", "terraform", "ci/cd"]

project_context:
  project: "BrainBox - AI Chat Organizer"
  role_doc: "docs/agents/roles/ENV_ENGINEER.md"
  state_file: "agent_states/ENV_ENGINEER_state.yml"
  mandatory_reads:
    - ".agent/rules/main.md"
    - "docs/Mandatory!/ARCHITECTURE.md"
