BRANCH=$(git rev-parse --abbrev-ref HEAD)

# Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ°Ğ¹ Ğ´Ğ¸Ñ€ĞµĞºÑ‚ĞµĞ½ push ĞºÑŠĞ¼ main
if [ "$BRANCH" = "main" ]; then
  echo "âŒ Direct push to main is forbidden."
  echo "   Create a feature/* or fix/* branch and open a Pull Request."
  exit 1
fi

echo "ğŸ” Pre-push: Running type check..."
pnpm turbo type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type check failed."
  exit 1
fi

echo "ğŸ” Pre-push: Running tests..."
pnpm turbo test --filter=@brainbox/extension
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed."
  exit 1
fi

echo "âœ… Pre-push passed."
