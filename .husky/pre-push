#!/bin/bash
BRANCH=$(git rev-parse --abbrev-ref HEAD)
if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "dev" ]; then
  echo "‚ùå ERROR: Direct push to '$BRANCH' is FORBIDDEN!"
  echo "   Use feature/ or fix/ branches and Pull Requests to 'dev'."
  exit 1
fi
echo "üîç Quality Gate: Running Type-Check..."
if pnpm turbo type-check; then
  echo "‚úÖ Safe to push!"
  exit 0
else
  echo "‚ùå Type-check failed!"
  exit 1
fi
