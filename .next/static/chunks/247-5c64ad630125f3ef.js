"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{7247:function(e,t,a){a.d(t,{I:function(){return ea}});var r,s,l=a(7437),d=a(2265);(r=s||(s={})).ChatGPT="chatgpt",r.Claude="claude",r.Gemini="gemini",r.Other="other";var i=a(5810),n=a(3753),o=a(9376),c=a(4935),x=a(221),h=a(4822),b=a(91),u=a(6137),m=a(2805),g=a(3113),k=a(4423),p=a(2883),f=a(8124),y=a(2101),v=a(1769),j=a(8736),w=a(5675),N=a(800),Z=a(5005),C=a(5252),z=a(370),S=a(8896),_=a(3618),F=a(2106),T=a(9374),E=a(8662),A=a(4554),D=a(5471),I=a(9202),L=a(8997),O=a(1197),P=a(4938),R=a(5929),G=a(4924),U=a(6865),M=a(2489),B=a(1533),J=a(8335),K=a(9548),q=a(8893),H=a(5262),Q=a(9334),V=a(8930),W=a(401),X=a(933),Y=a(6362),$=a(2023);c.Z,x.Z,h.Z,b.Z,u.Z,m.Z,g.Z,k.Z,p.Z,f.Z,y.Z,v.Z,j.Z,w.Z,N.Z,Z.Z,C.Z,z.Z,S.Z,_.Z,F.Z,T.Z,E.Z,A.Z,D.Z,I.Z,L.Z,O.Z,P.Z,R.Z,G.Z;let ee={blue:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-500/30",purple:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-500/30",amber:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-500/30",emerald:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-500/30",rose:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300 border-rose-200 dark:border-rose-500/30",cyan:"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 border-cyan-200 dark:border-cyan-500/30",default:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700"},et=e=>{let{platform:t}=e,a={[s.ChatGPT]:"bg-emerald-500/10 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 border-emerald-500/20 dark:border-emerald-500/30",[s.Claude]:"bg-orange-500/10 dark:bg-orange-500/20 text-orange-600 dark:text-orange-300 border-orange-500/20 dark:border-orange-500/30",[s.Gemini]:"bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-300 border-blue-500/20 dark:border-blue-500/30",[s.Other]:"bg-gray-500/10 dark:bg-gray-500/20 text-gray-600 dark:text-gray-300 border-gray-500/20 dark:border-gray-500/30"};return(0,l.jsx)("span",{className:"text-[10px] uppercase tracking-wider font-bold px-2 py-0.5 rounded-full border ".concat(a[t]),children:t})},ea=e=>{let{chat:t}=e,{updateChat:a,deleteChat:r}=(0,i.a)(),{folders:c}=(0,n.t)(),x=(0,o.usePathname)(),[h,b]=(0,d.useState)(!1),[u,m]=(0,d.useState)(""),[g,k]=(0,d.useState)(!1),[p,f]=(0,d.useState)(!1),[y,v]=(0,d.useState)(!1),[w,N]=(0,d.useState)(!1),[Z,C]=(0,d.useState)(!1),[z,S]=(0,d.useState)(t.title),_=(0,d.useRef)(null),[F,T]=(0,d.useState)(!1),[E,A]=(0,d.useState)(t.summary||""),[D,I]=(0,d.useState)(!1),[L,O]=(0,d.useState)(t.url||"");(0,d.useEffect)(()=>{Z&&_.current&&_.current.focus()},[Z]),(0,d.useEffect)(()=>{if(window.location.hash==="#".concat(t.id)){N(!0);let e=setTimeout(()=>N(!1),2e3);return()=>clearTimeout(e)}},[x,t.id]);let P=async()=>{if(!t.content)return;b(!0),m("Generating Title...");let e=setTimeout(()=>m("Summarizing content..."),1e3),r=setTimeout(()=>m("Extracting tasks..."),2e3);try{let e=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t.content,chatId:t.id})});if(!e.ok)throw Error("AI analysis failed");let r=await e.json();await a(t.id,{title:r.title,summary:r.summary,tasks:r.tasks})}catch(e){console.error("AI Analysis error:",e)}finally{clearTimeout(e),clearTimeout(r),b(!1),m("")}},R=async()=>{z.trim()&&z!==t.title?await a(t.id,{title:z.trim()}):S(t.title),C(!1)},ea=async()=>{E!==t.summary&&await a(t.id,{summary:E}),T(!1)},er=async()=>{await a(t.id,{url:L.trim()||void 0}),I(!1)},es=async e=>{await a(t.id,{folder_id:e}),v(!1),k(!1)},el=async()=>{await a(t.id,{is_archived:!t.is_archived}),k(!1)},ed=c.find(e=>e.id===t.folder_id),ei=G.Z,en=(null==ed?void 0:ed.color)?ee[ed.color]||ee.default:"";return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{id:t.id,draggable:!0,onDragStart:e=>{e.dataTransfer.setData("chatId",t.id),e.dataTransfer.effectAllowed="move"},className:"glass-card rounded-xl p-5 relative group flex flex-col h-full cursor-grab active:cursor-grabbing text-slate-900 dark:text-white transition-all duration-500\n          ".concat(w?"ring-2 ring-cyan-500 shadow-lg shadow-cyan-500/20 scale-[1.02]":"","\n        "),children:[p&&(0,l.jsxs)("div",{className:"absolute inset-0 z-20 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm rounded-xl flex flex-col items-center justify-center text-center p-4 animate-in fade-in duration-200",children:[(0,l.jsx)(U.Z,{className:"text-red-500 mb-2",size:32}),(0,l.jsx)("h4",{className:"font-bold mb-1 text-slate-900 dark:text-white",children:"Delete Chat?"}),(0,l.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-4",children:"This action cannot be undone."}),(0,l.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),f(!1)},className:"flex-1 px-3 py-2 rounded-lg bg-slate-200 dark:bg-white/10 hover:bg-slate-300 dark:hover:bg-white/20 text-sm transition-colors text-slate-700 dark:text-slate-200",children:"Cancel"}),(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),r(t.id)},className:"flex-1 px-3 py-2 rounded-lg bg-red-600 hover:bg-red-500 text-sm text-white transition-colors",children:"Delete"})]})]}),y&&(0,l.jsxs)("div",{className:"absolute inset-0 z-20 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm rounded-xl p-4 animate-in fade-in duration-200 flex flex-col",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h4",{className:"font-bold",children:"Move to..."}),(0,l.jsx)("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-slate-900 dark:hover:text-white",children:(0,l.jsx)(M.Z,{size:16})})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-1 custom-scrollbar",children:[(0,l.jsx)("button",{onClick:()=>es(void 0),className:"w-full text-left px-3 py-2 rounded text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-white/10",children:"No Folder (Root)"}),c.map(e=>{let a=G.Z;return(0,l.jsxs)("button",{onClick:()=>es(e.id),className:"w-full text-left px-3 py-2 rounded text-sm hover:bg-slate-200 dark:hover:bg-white/10 flex items-center gap-2\n                      ".concat(t.folder_id===e.id?"text-cyan-600 dark:text-cyan-400 bg-cyan-50 dark:bg-white/5":"text-slate-700 dark:text-slate-300","\n                    "),children:[(0,l.jsx)(a,{size:14,className:t.folder_id===e.id?"text-cyan-500":"text-slate-400"}),e.name]},e.id)})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)(et,{platform:t.platform||s.Other}),ed&&(0,l.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full border ".concat(en),children:[(0,l.jsx)(ei,{size:10}),(0,l.jsx)("span",{className:"text-[10px] font-medium",children:ed.name})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>k(!g),className:"text-slate-400 hover:text-slate-900 dark:hover:text-white p-1 rounded-md hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:(0,l.jsx)(B.Z,{size:16})}),g&&(0,l.jsxs)("div",{className:"absolute right-0 top-8 w-44 bg-white dark:bg-slate-900 border border-slate-200 dark:border-white/10 rounded-lg shadow-xl z-10 overflow-hidden text-sm animate-in fade-in zoom-in-95 duration-200",children:[(0,l.jsxs)("button",{onClick:()=>{T(!0),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-slate-100 dark:hover:bg-white/10 flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[(0,l.jsx)(j.Z,{size:14})," Edit Description"]}),(0,l.jsxs)("button",{onClick:()=>{I(!0),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-slate-100 dark:hover:bg-white/10 flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[(0,l.jsx)(J.Z,{size:14})," Edit Source URL"]}),(0,l.jsxs)("button",{onClick:()=>{v(!0),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-slate-100 dark:hover:bg-white/10 flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[(0,l.jsx)(K.Z,{size:14})," Move to Folder"]}),(0,l.jsxs)("button",{onClick:()=>{C(!0),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-slate-100 dark:hover:bg-white/10 flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[(0,l.jsx)(q.Z,{size:14})," Rename"]}),(0,l.jsxs)("button",{onClick:el,className:"w-full text-left px-4 py-2 hover:bg-slate-100 dark:hover:bg-white/10 flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[t.is_archived?(0,l.jsx)(H.Z,{size:14}):(0,l.jsx)(Q.Z,{size:14}),t.is_archived?"Restore":"Archive"]}),(0,l.jsx)("div",{className:"h-px bg-slate-200 dark:bg-white/5 my-1"}),(0,l.jsxs)("button",{onClick:()=>{f(!0),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-500/20 text-red-600 dark:text-red-400 flex items-center gap-2",children:[(0,l.jsx)(V.Z,{size:14})," Delete"]})]})]})]}),(0,l.jsx)("div",{className:"mb-2 min-h-[28px]",children:Z?(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{ref:_,value:z,onChange:e=>S(e.target.value),onBlur:R,onKeyDown:e=>{"Enter"===e.key&&R(),"Escape"===e.key&&(S(t.title),C(!1))},className:"w-full bg-white dark:bg-black/40 border border-cyan-500/50 rounded px-2 py-0.5 text-lg font-semibold text-slate-900 dark:text-white focus:outline-none"}),(0,l.jsx)("button",{onClick:R,className:"text-cyan-600 dark:text-cyan-400",children:(0,l.jsx)(W.Z,{size:18})})]}):(0,l.jsx)("h3",{onClick:()=>C(!0),className:"font-semibold text-lg leading-tight hover:text-cyan-600 dark:hover:text-cyan-300 cursor-text transition-colors truncate text-slate-800 dark:text-slate-100",title:"Click to rename",children:t.title})}),(0,l.jsx)("div",{className:"flex-1 mb-4 relative group/desc",children:F?(0,l.jsxs)("div",{className:"h-full flex flex-col gap-2",children:[(0,l.jsx)("textarea",{autoFocus:!0,className:"w-full h-full min-h-[100px] bg-slate-50 dark:bg-black/30 border border-cyan-500 rounded p-2 text-sm text-slate-800 dark:text-slate-200 focus:outline-none resize-none",value:E,onChange:e=>A(e.target.value),placeholder:"Enter a description..."}),(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>{A(t.summary||""),T(!1)},className:"text-xs px-2 py-1 text-slate-500",children:"Cancel"}),(0,l.jsx)("button",{onClick:ea,className:"text-xs px-2 py-1 bg-cyan-600 text-white rounded",children:"Save"})]})]}):(0,l.jsx)(l.Fragment,{children:t.summary?(0,l.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-3 cursor-text",onClick:()=>T(!0),title:"Click to edit description",children:t.summary}):(0,l.jsx)("p",{className:"text-sm text-slate-500 italic cursor-pointer hover:text-cyan-600",onClick:()=>T(!0),children:"No description. Click to add."})})}),t.tasks&&Array.isArray(t.tasks)&&t.tasks.length>0&&(0,l.jsxs)("div",{className:"mb-4 space-y-1",children:[t.tasks.slice(0,2).map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-300",children:[(0,l.jsx)(X.Z,{size:12,className:"text-cyan-600 dark:text-cyan-400 shrink-0"}),(0,l.jsx)("span",{className:"truncate",children:e})]},t)),t.tasks.length>2&&(0,l.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500 pl-5",children:["+",t.tasks.length-2," more tasks"]})]}),(0,l.jsx)("div",{className:"mt-auto",children:D?(0,l.jsxs)("div",{className:"pt-4 border-t border-slate-200 dark:border-white/5 flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(J.Z,{size:14,className:"text-slate-400"}),(0,l.jsx)("input",{autoFocus:!0,className:"flex-1 bg-slate-50 dark:bg-black/30 border border-cyan-500/50 rounded px-2 py-1 text-xs text-slate-900 dark:text-white focus:outline-none",placeholder:"https://...",value:L,onChange:e=>O(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>{O(t.url||""),I(!1)},className:"text-[10px] px-2 py-1 bg-slate-200 dark:bg-white/10 rounded hover:bg-slate-300 dark:hover:bg-white/20 text-slate-600 dark:text-slate-300",children:"Cancel"}),(0,l.jsx)("button",{onClick:er,className:"text-[10px] px-2 py-1 bg-cyan-600 hover:bg-cyan-500 text-white rounded font-medium",children:"Save URL"})]})]}):(0,l.jsxs)("div",{className:"pt-4 border-t border-slate-200 dark:border-white/5 flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-xs text-slate-500",children:t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[t.url&&(0,l.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors",title:"Open Original",children:(0,l.jsx)(Y.Z,{size:16})}),(0,l.jsx)("button",{onClick:P,disabled:h,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all min-w-[100px] justify-center\n                    ".concat(h?"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 border border-cyan-200 dark:border-cyan-500/30":"bg-cyan-600 hover:bg-cyan-500 text-white shadow-[0_0_15px_-3px_rgba(8,145,178,0.4)]"),children:h?(0,l.jsx)("span",{children:u||"Processing..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)($.Z,{size:14})," Analyze"]})})]})]})})]})})}},5810:function(e,t,a){a.d(t,{a:function(){return r}});let r=(0,a(3011).U)(e=>({chats:[],selectedChatId:null,isLoading:!1,setChats:t=>e({chats:t}),addChat:t=>e(e=>({chats:[t,...e.chats]})),updateChat:(t,a)=>e(e=>({chats:e.chats.map(e=>e.id===t?{...e,...a}:e)})),deleteChat:t=>e(e=>({chats:e.chats.filter(e=>e.id!==t)})),selectChat:t=>e({selectedChatId:t}),setLoading:t=>e({isLoading:t})}))},3753:function(e,t,a){a.d(t,{t:function(){return r}});let r=(0,a(3011).U)(e=>({folders:[],selectedFolderId:null,isLoading:!1,setFolders:t=>e({folders:t}),addFolder:t=>e(e=>({folders:[t,...e.folders]})),updateFolder:(t,a)=>e(e=>({folders:e.folders.map(e=>e.id===t?{...e,...a}:e)})),deleteFolder:t=>e(e=>({folders:e.folders.filter(e=>e.id!==t)})),selectFolder:t=>e({selectedFolderId:t}),setLoading:t=>e({isLoading:t})}))}}]);