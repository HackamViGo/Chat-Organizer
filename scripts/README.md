# BrainBox Scripts

–ü–æ–º–æ—â–Ω–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤–µ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ BrainBox API –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è—Ç–∞ –Ω–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ.

## üöÄ –ù–∞–ª–∏—á–Ω–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤–µ

### 1. API Test Suite (`test-api.js`)
–ò–∑—á–µ—Ä–ø–∞—Ç–µ–ª–µ–Ω —Ç–µ—Å—Ç –Ω–∞ –≤—Å–∏—á–∫–∏ API –µ–Ω–¥–ø–æ–π–Ω—Ç–æ–≤–µ –Ω–∞ Dashboard-–∞. –ü—Ä–æ–≤–µ—Ä—è–≤–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç, –∞—É—Ç–µ–Ω—Ç–∏–∫–∞—Ü–∏—è –∏ CORS.

**–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ:**
```bash
npm run test:api
```

### 2. Extension Sync Validation (`validate_extension_sync.js`)
–°–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω —Ç–µ—Å—Ç –∑–∞ –ª–æ–≥–∏–∫–∞—Ç–∞ –Ω–∞ –±—Ä–∞—É–∑—ä—Ä–Ω–æ—Ç–æ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ. –ü—Ä–æ–≤–µ—Ä—è–≤–∞:
- Supabase Authentication –ø–æ—Ç–æ–∫.
- **Upsert –ª–æ–≥–∏–∫–∞**: –£–≤–µ—Ä—è–≤–∞ —Å–µ, —á–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω –∑–∞–ø–∏—Å –Ω–∞ —Å—ä—â–∏—è —á–∞—Ç (—Å—ä—â–æ—Ç–æ URL/ID), —Ç–æ–π —Å–µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞, –≤–º–µ—Å—Ç–æ –¥–∞ —Å–µ —Å—ä–∑–¥–∞–≤–∞ –¥—É–±–ª–∏–∫–∞—Ç.
- –ò–Ω—Ç–µ–≥—Ä–∏—Ç–µ—Ç –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ (—Å—ä–æ–±—â–µ–Ω–∏—è, –º–µ—Ç–∞–¥–∞–Ω–Ω–∏).

**–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ:**
```bash
node scripts/validate_extension_sync.js
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∫—Ä–∏–ø—Ç–æ–≤–µ—Ç–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç environment –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –∑–∞ –≥—ä–≤–∫–∞–≤–æ—Å—Ç. –ú–æ–∂–µ—Ç–µ –¥–∞ –≥–∏ –ø–æ–¥–∞–¥–µ—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:

| –ü—Ä–æ–º–µ–Ω–ª–∏–≤–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | Default |
|------------|----------|---------|
| `API_BASE_URL` | –ë–∞–∑–æ–≤ URL –Ω–∞ Dashboard-–∞ | `http://localhost:3000` |
| `TEST_EMAIL` | Email –∑–∞ —Ç–µ—Å—Ç–æ–≤–∏—è –∞–∫–∞—É–Ω—Ç | `test@example.com` |
| `TEST_PASSWORD` | –ü–∞—Ä–æ–ª–∞ –∑–∞ —Ç–µ—Å—Ç–æ–≤–∏—è –∞–∫–∞—É–Ω—Ç | `testpassword123` |

### –ü—Ä–∏–º–µ—Ä–∏:

```bash
# –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –ª–æ–∫–∞–ª–µ–Ω —Å—ä—Ä–≤—ä—Ä —Å custom –∞–∫–∞—É–Ω—Ç
TEST_EMAIL=user@test.bg TEST_PASSWORD=my_secret npm run test:api

# –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è—Ç–∞ –∫—ä–º Production (Vercel)
API_BASE_URL=https://brainbox-alpha.vercel.app TEST_EMAIL=demo@brainbox.site node scripts/validate_extension_sync.js
```

## ‚ö†Ô∏è –ò–∑–∏—Å–∫–≤–∞–Ω–∏—è
- Node.js 18+ (–∑–∞—Ä–∞–¥–∏ –≤–≥—Ä–∞–¥–µ–Ω–∏—è `fetch`).
- –í–∞–ª–∏–¥–µ–Ω `.env.local` —Ñ–∞–π–ª —Å `NEXT_PUBLIC_SUPABASE_URL` –∏ `NEXT_PUBLIC_SUPABASE_ANON_KEY` –∑–∞ `validate_extension_sync.js`.
