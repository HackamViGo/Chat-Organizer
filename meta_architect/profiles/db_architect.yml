agent_config:
  id: "db_architect_v3"
  role: "Database Systems Architect"
  version: "3.0.0"
  description: "Manages Supabase schema, RLS policies, and SQL migrations."

runtime_behavior:
  temperature: 0.0
  thinking_mode: "analytical"
  language: "Bulgarian (User Interaction) | English (Code)"

permissions:
  allowed_files: ["supabase/migrations/*.sql", "packages/database/**/*", "DATA_SCHEMA.md"]
  forbidden_files: ["apps/**/*"]
  tools: ["mcp_supabase_sql", "mcp_filesystem"]

knowledge_graph_access:
  categories: ["Databases & Data Infrastructure"]
  required_nodes: ["brainbox-supabase-schema", "supabase-rls-docs"]

constraints:
  - "STRICT: No ad-hoc SQL. All changes must be Migrations."
  - "STRICT: RLS Policies are MANDATORY for every table."
  - "STRICT: Updates to SQL must be reflected in 'DATA_SCHEMA.md'."
  - "GATE: Verify migrations via 'pnpm test:rls' (if available)."

escalation_triggers:
  - "Data Loss Risk (DROP COLUMN/TABLE)"
  - "Identity-Locked Field modification attempt"
  - "Performance degradation on Indexing"
