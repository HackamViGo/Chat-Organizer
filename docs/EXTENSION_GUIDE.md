# üìò –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∑–∞ AI

–¢–æ–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç –æ–±–µ–¥–∏–Ω—è–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Ä–∞–±–æ—Ç–∞ —Å –∏–∑–∫—É—Å—Ç–≤–µ–Ω –∏–Ω—Ç–µ–ª–µ–∫—Ç.

---

## –ß–ê–°–¢ 1: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### 1. –û—Å–Ω–æ–≤–Ω–∞ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Manifest V3)
–†–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ –µ –∏–∑–≥—Ä–∞–¥–µ–Ω–æ –ø–æ —Å—ä–≤—Ä–µ–º–µ–Ω–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç **Manifest V3**, –∫–æ–µ—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç –∏ –≤–∏—Å–æ–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç.
* **Background Service Worker:** –°–ª—É–∂–∏ –∫–∞—Ç–æ "–º–æ–∑—ä–∫" –Ω–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ. –£–ø—Ä–∞–≤–ª—è–≤–∞ —Å—ä–±–∏—Ç–∏—è—Ç–∞, –ø–æ–¥–¥—ä—Ä–∂–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏—Ç–µ –º–µ–Ω—é—Ç–∞ –∏ –∫–æ–º—É–Ω–∏–∫–∏—Ä–∞ —Å –≤—ä–Ω—à–Ω–∏ —Å–∏—Å—Ç–µ–º–∏.
* **Content Scripts:** –°–∫—Ä–∏–ø—Ç–æ–≤–µ, –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–∏ –≤ —Ü–µ–ª–µ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∏ –∑–∞ –∞–Ω–∞–ª–∏–∑ –Ω–∞ DOM —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –∏ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –Ω–æ–≤–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç–∏.
* **Popup UI:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞ –±—ä—Ä–∑ –¥–æ—Å—Ç—ä–ø –¥–æ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è.

### 2. –°–∏—Å—Ç–µ–º–∞ –∑–∞ –ò–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –î–∞–Ω–Ω–∏ (Content Extraction)
* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞–Ω–µ:** –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–∞ —Ç–∏–ø–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ç–∞ —á—Ä–µ–∑ URL –∞–¥—Ä–µ—Å–∞.
* **DOM –ê–Ω–∞–ª–∏–∑:** –¢—ä—Ä—Å–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∑–∞ –∑–∞–≥–ª–∞–≤–∏—è, —Ç–µ–∫—Å—Ç–æ–≤–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω–∏.
* **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ –º–µ–Ω—é:** –ü–æ–∑–≤–æ–ª—è–≤–∞ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–ª–∏ –∏–∑–±—Ä–∞–Ω —Ç–µ–∫—Å—Ç –∫—ä–º —Ü–µ–Ω—Ç—Ä–∞–ª–Ω–æ—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### 3. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ò–Ω–∂–µ–∫—Ü–∏—è (UI Injection)
* **–ò–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –±—É—Ç–æ–Ω–∏:** –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ (–º–µ–Ω—é "—Ç—Ä–∏ —Ç–æ—á–∫–∏") –≤ —Å—Ç—Ä–∞–Ω–∏—á–Ω–∏—Ç–µ –ª–µ–Ω—Ç–∏ –Ω–∞ –≤—ä–Ω—à–Ω–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏.
* **Hover –µ—Ñ–µ–∫—Ç–∏:** –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ —Å–∞–º–æ –ø—Ä–∏ –ø—Ä–µ–º–∏–Ω–∞–≤–∞–Ω–µ —Å –º–∏—à–∫–∞—Ç–∞.
* **Dropdown –º–µ–Ω—é—Ç–∞:** –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –º–µ–Ω—é—Ç–∞ –∑–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

### 4. –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –∏ Freemium –ú–æ–¥–µ–ª
* **–ù–∏–≤–∞ –Ω–∞ –ø–ª–∞–Ω–æ–≤–µ:** –†–∞–∑–≥—Ä–∞–Ω–∏—á–∞–≤–∞–Ω–µ –º–µ–∂–¥—É "–ë–µ–∑–ø–ª–∞—Ç–µ–Ω" (—Å –ª–∏–º–∏—Ç–∏) –∏ "–ü—Ä–µ–º–∏—É–º" (–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω).
* **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ü—Ä–∏ –∑–∞—Å–∏—á–∞–Ω–µ –Ω–∞ –ø–ª–∞—â–∞–Ω–µ, —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ –Ω–µ–∑–∞–±–∞–≤–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞ –ª–æ–∫–∞–ª–Ω–æ—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
* **–ó–∞—â–∏—Ç–∞ (Anti-tampering):** –ü–µ—Ä–∏–æ–¥–∏—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–∂–¥—É –ª–æ–∫–∞–ª–Ω–∏—è —Å—Ç–∞—Ç—É—Å –∏ —Å—ä—Ä–≤—ä—Ä–∞ –Ω–∞ —Ä–∞–∑–ø–ª–∞—â–∞—Ç–µ–ª–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞.

---

## –ß–ê–°–¢ 2: –†–µ–∑—é–º–µ –∑–∞ AI (AI-Ready Context)

*–ó–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–¥ –∏–ª–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ –ª–æ–≥–∏–∫–∞—Ç–∞.*

**–ö–ª—é—á–æ–≤–∏ –æ–±–µ–∫—Ç–∏ –∏ –ª–æ–≥–∏–∫–∞:**
1. **Data Schema:** –†–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ –∏–∑–≤–ª–∏—á–∞ `title`, `url`, `platform` –∏ `content`. –î–∞–Ω–Ω–∏—Ç–µ —Å–µ –ø—Ä–µ–¥–∞–≤–∞—Ç –∫—ä–º `/save` –º–∞—Ä—à—Ä—É—Ç –Ω–∞ —É–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —á—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∏.
2. **Message Passing:** 
   - `popup.js` -> `background.js` (–∑–∞—è–≤–∫–∞ –∑–∞ —Å—Ç–∞—Ç—É—Å –∏–ª–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞).
   - `background.js` -> `content-script.js` (–∫–æ–º–∞–Ω–¥–∞ –∑–∞ –∏–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏).
   - `content-script.js` -> `background.js` (–≤—Ä—ä—â–∞–Ω–µ –Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç).
3. **State Management:** –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ `chrome.storage.local` –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ `plan`, `chatLimit` –∏ `folderLimit`.
4. **DOM Injection Strategy:** –ò–∑–ø–æ–ª–∑–≤–∞—Ç —Å–µ `MutationObserver` –∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–Ω–æ –∑–∞—Ä–µ–¥–µ–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ (sidebars) –≤ AI –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏.
5. **Security:** –í—Å–∏—á–∫–∏ –≤—ä–Ω—à–Ω–∏ –∑–∞—è–≤–∫–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∞ –æ–ø–∏—Å–∞–Ω–∏ –≤ `host_permissions` –Ω–∞ `manifest.json`.
6. **Error Handling:** –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω `uncaught_exception_handler.js` –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∏ –≥—Ä–µ—à–∫–∏ –∏ –ø–æ–∫–∞–∑–≤–∞–Ω–µ —Å–∞–º–æ –Ω–∞ —Ç–µ–∑–∏ –æ—Ç —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ.
7. **Platform Detection:** –õ–æ–≥–∏–∫–∞—Ç–∞ –∑–∞ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞–Ω–µ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ (ChatGPT, Claude, Gemini) —Å–µ –±–∞–∑–∏—Ä–∞ –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–∏ –∏–∑—Ä–∞–∑–∏ –≤—ä—Ä—Ö—É `window.location.href`.

---

## –ß–ê–°–¢ 3: –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∞ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞

–ó–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –ø–æ–¥–æ–±—Ä—è–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞—Ç–∞, –Ω–∞–π-–ø–æ–¥—Ö–æ–¥—è—â–∞—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –µ:

### **webextension-polyfill** (–æ—Ç Mozilla)
* **–ó–∞—â–æ:** –ü–æ–∑–≤–æ–ª—è–≤–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ **Promises** –≤–º–µ—Å—Ç–æ callbacks, –∫–æ–µ—Ç–æ –ø—Ä–∞–≤–∏ –∫–æ–¥–∞ –º–Ω–æ–≥–æ –ø–æ-—á–∏—Å—Ç –∏ –º–æ–¥–µ—Ä–µ–Ω.
* **–°—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç:** –û—Å–∏–≥—É—Ä—è–≤–∞ —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ –≤ Chrome, Firefox –∏ Edge —Å –º–∏–Ω–∏–º–∞–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏.
* **AI –ü—Ä–µ–¥–∏–º—Å—Ç–≤–æ:** AI –º–æ–¥–µ–ª–∏—Ç–µ –ø–∏—à–∞—Ç –º–Ω–æ–≥–æ –ø–æ-–Ω–∞–¥–µ–∂–¥–µ–Ω –∫–æ–¥, –∫–æ–≥–∞—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç `async/await` —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ —Ç–∞–∑–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞.

### **MutationObserver API**
* **–ö–∞–∫–≤–æ –µ:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ–π—Ç–æ –ø–æ–∑–≤–æ–ª—è–≤–∞ —Å–ª–µ–¥–µ–Ω–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏ –≤ DOM –¥—ä—Ä–≤–æ—Ç–æ (–¥–æ–±–∞–≤—è–Ω–µ/–ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏, –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–∏).
* **–ó–∞—â–æ –µ –≤–∞–∂–Ω–æ –∑–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ:** AI –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏—Ç–µ (ChatGPT, Gemini) –∑–∞—Ä–µ–∂–¥–∞—Ç —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ —Å–∏ –¥–∏–Ω–∞–º–∏—á–Ω–æ. `MutationObserver` –ø–æ–∑–≤–æ–ª—è–≤–∞ –Ω–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ –¥–∞ —Ä–∞–∑–±–µ—Ä–µ —Ç–æ—á–Ω–æ –∫–æ–≥–∞ —Å–µ –µ –ø–æ—è–≤–∏–ª –Ω–æ–≤ —á–∞—Ç –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—á–Ω–∞ –ª–µ–Ω—Ç–∞, –∑–∞ –¥–∞ –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞ –±—É—Ç–æ–Ω–∏—Ç–µ –∑–∞ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –≤–µ–¥–Ω–∞–≥–∞, –±–µ–∑ –¥–∞ —Å–µ —Ä–∞–∑—á–∏—Ç–∞ –Ω–∞ –Ω–µ–Ω–∞–¥–µ–∂–¥–Ω–∏ —Ç–∞–π–º–µ—Ä–∏.
* **–û—Å–Ω–æ–≤–Ω–∏ –º–µ—Ç–æ–¥–∏:**
    - `observe(target, config)`: –ó–∞–ø–æ—á–≤–∞ —Å–ª–µ–¥–µ–Ω–µ—Ç–æ.
    - `disconnect()`: –°–ø–∏—Ä–∞ —Å–ª–µ–¥–µ–Ω–µ—Ç–æ.
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [MDN MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)
