# üéØ BrainBox Master TODO & Roadmap

## üöÄ –ö–†–ò–¢–ò–ß–ù–ò –ó–ê –ü–û–¢–í–™–†–ñ–î–ï–ù–ò–ï (–ü–†–ï–î–ò UI V2)
- [x] **Auth Sync**: –†–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ —Ö–≤–∞—â–∞ –ª–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ `accessToken` —Å–ª–µ–¥ –ª–æ–≥–∏–Ω –≤ `/extension-auth`? ‚úÖ
- [x] **ChatGPT Save**: –†–∞–±–æ—Ç–∏ –≥–ª–∞–¥–∫–æ –ø—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ—Ç–æ –º–µ–Ω—é. ‚úÖ
- [x] **Gemini Save**: –ù–∞–ø—ä–ª–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ –∏–∑–≤–ª–∏—á–∞–Ω–µ (ID –æ—Ç jslog/URL) –∏ –∑–∞–ø–∏—Å. ‚úÖ
- [x] **Claude Save**: –†–∞–±–æ—Ç–∏ –ø—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ—Ç–æ –º–µ–Ω—é. ‚úÖ
- [x] **Prompt Inject**: –ü–æ—è–≤—è–≤–∞ –ª–∏ —Å–µ –º–µ–Ω—é—Ç–æ —Å –ø—Ä–æ–º–ø—Ç–æ–≤–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ—Ç–æ –º–µ–Ω—é (–¥–µ—Å–µ–Ω –±—É—Ç–æ–Ω) –≤—ä—Ä—Ö—É textarea? ‚úÖ
- [x] **Environment Toggle**: –í–µ—á–µ –µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ **Local (localhost:3000)** –≤ `config.js` –∏ `manifest.json`. ‚úÖ
- [x] **Coordinate Fix**: –ö–æ—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–∏—Ä–∞–Ω–µ –Ω–∞ –º–µ–Ω—é—Ç–æ —Å–ø—Ä—è–º–æ —Å–∫—Ä–æ–ª –ø–æ–∑–∏—Ü–∏—è—Ç–∞. ‚úÖ
- [ ] **Title Extraction Cleanup**: –ü–æ—á–∏—Å—Ç–≤–∞ –ª–∏ —Å–µ –∫–æ—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥–ª–∞–≤–∏–µ—Ç–æ –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–∏ –Ω–∏–∑–æ–≤–µ –∫–∞—Ç–æ "Pinned chat"?

## üìë LOGIC: CONTEXT MENU SAVE
–ü—Ä–∏ –¥–µ—Å–µ–Ω –±—É—Ç–æ–Ω -> "Save Chat with BrainBox":
1. **New Save**: –ê–∫–æ —á–∞—Ç—ä—Ç –Ω–µ –µ –≤ –±–∞–∑–∞—Ç–∞ -> `‚úÖ Conversation saved successfully!`
2. **Update**: –ê–∫–æ —á–∞—Ç—ä—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞, –Ω–æ –∏–º–∞ –Ω–æ–≤–∏ —Å—ä–æ–±—â–µ–Ω–∏—è -> `‚ú® Chat updated! Captured [N] new messages.`
3. **Duplicate**: –ê–∫–æ —á–∞—Ç—ä—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –∏ –Ω—è–º–∞ –Ω–æ–≤–∏ –¥–∞–Ω–Ω–∏ -> `‚ÑπÔ∏è Chat already saved. No new messages found. Scroll up to load older history.`
4. **Fallback**: –ê–∫–æ –Ω–µ —Å–µ –Ω–∞–º–µ—Ä–∏ ID –æ—Ç –∫–ª–∏–∫–Ω–∞—Ç–∏—è –µ–ª–µ–º–µ–Ω—Ç, —Å–µ –ø—Ä–∞–≤–∏ –æ–ø–∏—Ç –∑–∞ –∏–∑–≤–ª–∏—á–∞–Ω–µ –æ—Ç URL –∞–¥—Ä–µ—Å–∞.

---

## üõ†Ô∏è –¢–ï–ö–£–©–ò –ó–ê–î–ê–ß–ò –ü–û –†–ê–ó–®–ò–†–ï–ù–ò–ï–¢–û
- [x] **Universal Platform Support**: ChatGPT, Gemini –∏ Claude –ø–æ–¥–¥—ä—Ä–∂–∞—Ç: ‚úÖ
  - ‚úÖ **Save/Download Chat**: –†–∞–±–æ—Ç–∏ –≤ ChatGPT, Claude –∏ Gemini.
  - ‚úÖ **Universal Prompt Tools**: "Selection to Prompt" –∏ "Prompt Inject" —Ä–∞–±–æ—Ç—è—Ç –Ω–∞ –í–°–ï–ö–ò —Å–∞–π—Ç.
- [x] **Phase 8: Dynamic Menu & Search (Implemented)** ‚úÖ
  - ‚úÖ **Hierarchical Menu**: –ü—Ä–æ–º–ø—Ç–æ–≤–µ, –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–∏ –ø–æ —Å–µ–∫—Ü–∏–∏ (Search, Folders, Quick).
  - ‚úÖ **Quick Access Folders**: –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –∏–∑–±–∏—Ä–∞ –¥–æ 3 —Ç–æ–ø –ø–∞–ø–∫–∏ –æ—Ç Settings.
  - ‚úÖ **Smart Search**: –ö–æ–º–ø–∞–∫—Ç–µ–Ω overlay –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞ –ø—Ä–æ–º–ø—Ç –≤ –¥–≤–∏–∂–µ–Ω–∏–µ.
- [ ] **Phase 9: Advanced (Pro)**
  - [ ] Auto-Categorization (Gemini API)
  - [ ] Shift+Click Multi-select –∑–∞ –∑–∞–ø–∏—Å–∏

---

## üíª –¢–ï–ö–£–©–ò –ó–ê–î–ê–ß–ò –ü–û DASHBOARD
- [ ] **Folder Edit**: –ë—É—Ç–æ–Ω—ä—Ç –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –≤ —Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—Ç–∞ –ª–µ–Ω—Ç–∞ –¥–∞ –æ—Ç–≤–∞—Ä—è UI –∑–∞ –ø—Ä–æ–º—è–Ω–∞.
- [ ] **Selection Formatting**: –ü–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ `insertFormatting()` (–∫—É—Ä—Å–æ—Ä—ä—Ç –¥–∞ –Ω–µ –±—è–≥–∞ –≤ –∫—Ä–∞—è).
- [ ] **Code vs Text Differentiation**: –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Ç–∏—á–Ω–æ –ø–æ–¥—á–µ—Ä—Ç–∞–≤–∞–Ω–µ –∏ –ø–æ-–¥–æ–±—Ä–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–æ–¥ –±–ª–æ–∫–æ–≤–µ.
- [ ] **Typography Upgrade**: –ü–æ-–¥–æ–±—Ä–∏ —à—Ä–∏—Ñ—Ç–æ–≤–µ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç–∞ –≤ —Ü–µ–ª–∏—è —Å–∞–π—Ç.
- [ ] **Refine Edit Function**: –ü–æ–¥–æ–±—Ä—è–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ—Ç–æ –∏–∑–∂–∏–≤—è–≤–∞–Ω–µ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è.
- [ ] **Log Optimization**: –î—Ä–∞—Å—Ç–∏—á–Ω–æ –Ω–∞–º–∞–ª—è–≤–∞–Ω–µ –Ω–∞ `console.log` –∏–∑—Ö–æ–¥–∏—Ç–µ –≤ Dashboard –∏ Extension. üìâ
- [ ] **PRO Visibility**: –ù–∞–ø—ä–ª–Ω–æ —Å–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ AI –±—É—Ç–æ–Ω–∏ –∑–∞ –±–µ–∑–ø–ª–∞—Ç–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏.
- [x] **Settings Refactor**: ‚úÖ –ì–æ—Ç–æ–≤–æ
  - **Quick Access**: –í–µ—á–µ –ø–æ–¥–¥—ä—Ä–∂–∞ —Å–∞–º–æ `prompt` –ø–∞–ø–∫–∏ –∑–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ.
  - **Cleanup**: –ë—É—Ç–æ–Ω "Clean" –∑–∞ –º–∞—Å–æ–≤–æ –æ—Ç–º–∞—Ä–∫–∏—Ä–∞–Ω–µ.
  - **Synchronization**: –°–µ–∫—Ü–∏—è –∑–∞ —Ä—ä—á–µ–Ω sync –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞ real-time —Å—Ç–∞—Ç—É—Å.

---

---

## ü§ñ AI ANALYSIS & ENHANCEMENT (GEMINI 2.0 FLASH)
- [x] **Smart Summarization**: –í–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–∏—è—Ç Regex –∞–Ω–∞–ª–∏–∑, –≤–µ—á–µ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ Gemini API. ‚úÖ
  - **Short Summary (3-4 –∏–∑—Ä–µ—á–µ–Ω–∏—è)**: –ó–∞–ø–∏—Å–≤–∞ —Å–µ –≤ –∫–æ–ª–æ–Ω–∞ `summary`.
  - **Detailed Analysis**: –ò–∑—á–µ—Ä–ø–∞—Ç–µ–ª–Ω–æ —Ä–µ–∑—é–º–µ, –∑–∞–ø–∏—Å–≤–∞—â–æ —Å–µ –≤ –Ω–æ–≤–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞ `detailed_summary`.
- [x] **AI Prompt Enhancement**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –Ω–∞ –ø—Ä–æ–º–ø—Ç–æ–≤–µ –≤ "Enhance Prompt" –∫–∞—Ä—Ç–∞—Ç–∞. ‚úÖ
  - **On-the-fly Rewriting**: –ò–∑–ø–æ–ª–∑–≤–∞ `gemini-2.0-flash-exp` –∑–∞ –ø—Ä–µ–Ω–∞–ø–∏—Å–≤–∞–Ω–µ –∏ –ø–æ–¥–æ–±—Ä—è–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏—è –ø—Ä–æ–º–ø—Ç –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ –ø–æ–ª–µ—Ç–æ.
  - **Selection to Enhance**: –ú–∞—Ä–∫–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç –∏ "AI Enhance Selection" –ø—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ—Ç–æ –º–µ–Ω—é.
- [x] **Smart Tagging**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª–Ω–∏ —Ç–∞–≥–æ–≤–µ. ‚úÖ
- [x] **Task Extraction**: –ü—Ä–µ—Ü–∏–∑–Ω–æ –∏–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ Action items. ‚úÖ
- [x] **Cleanup**: –°—Ç–∞—Ä–∏—è—Ç –º–æ–¥—É–ª `chatAnalysis.ts` (Regex-based) –µ –ø—Ä–µ–º–∞—Ö–≤–∞—Ç. ‚úÖ

### üõ†Ô∏è Detailed Logic & Workflow:
1. **Frontend Trigger (`ChatCard.tsx`)**:
   - –ü—Ä–∏ –∫–ª–∏–∫ –Ω–∞ "Analyze" —Å–µ –≤–∑–µ–º–∞ `chat.content` (—Ü–µ–ª–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä).
   - –ò–∑–ø—Ä–∞—â–∞ —Å–µ POST –∑–∞—è–≤–∫–∞ –∫—ä–º `/api/ai/generate` —Å chatId –∏ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ.
2. **API Layer (`route.ts`)**:
   - –í–∞–ª–∏–¥–∏—Ä–∞ —Å–µ—Å–∏–∏—Ç–µ –∏ —Ç–æ–∫–µ–Ω–∏—Ç–µ (–ø—Ä–µ–∑ Supabase/Next.js).
   - –ò–∑–≤–ª–∏—á–∞ —Å–µ `GEMINI_API_KEY` –æ—Ç environment variables –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞.
3. **AI Service Processing (`ai.ts`)**:
   - –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –º–æ–¥–µ–ª `gemini-2.0-flash-exp`.
   - **System Prompt**: –î–µ—Ñ–∏–Ω–∏—Ä–∞ —Å—Ç—Ä–∏–∫–Ω–∞ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ –æ—Ç–≥–æ–≤–æ—Ä. –ò–∑–∏—Å–∫–≤–∞ –∑–∞–≥–ª–∞–≤–∏–µ (4-6 –¥—É–º–∏), –∫—Ä–∞—Ç–∫–æ —Ä–µ–∑—é–º–µ (—Ç–æ—á–Ω–æ 3-4 –∏–∑—Ä–µ—á–µ–Ω–∏—è –≤ Markdown), –¥–µ—Ç–∞–π–ª–µ–Ω —Ä–∞–∑–±–æ—Ä, –º–∞—Å–∏–≤ –æ—Ç —Ç–∞–≥–æ–≤–µ –∏ —Å–ø–∏—Å—ä–∫ —Å—ä—Å –∑–∞–¥–∞—á–∏.
   - **Safety**: –ü—Ä–∏–ª–∞–≥–∞ —Å–µ –ø–æ–¥–æ–±—Ä–µ–Ω –º–µ—Ç–æ–¥ –∑–∞ JSON –∏–∑–≤–ª–∏—á–∞–Ω–µ (regex match –Ω–∞ `{...}`), –∑–∞ –¥–∞ —Å–µ –∏–∑–±–µ–≥–Ω–∞—Ç –≥—Ä–µ—à–∫–∏ –ø—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ—Ç–æ –æ—Ç —Å—Ç—Ä–∞–Ω–∞ –Ω–∞ AI.
4. **Database Persistence**:
   - –†–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç –≤ Supabase:
     - `summary` -> –ö—Ä–∞—Ç–∫–æ —Ä–µ–∑—é–º–µ.
     - `detailed_summary` (–Ω–æ–≤–∞ –∫–æ–ª–æ–Ω–∞) -> –ü—ä–ª–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ.
     - `tags` (–Ω–æ–≤–∞ –∫–æ–ª–æ–Ω–∞, JSONB) -> –£–º–Ω–∏ –µ—Ç–∏–∫–µ—Ç–∏.
     - `tasks` -> –ú–∞—Å–∏–≤ –æ—Ç –∑–∞–¥–∞—á–∏.
5. **UI Update**:
   - Chat Card –ø–æ–∫–∞–∑–≤–∞ —Ç–∞–≥–æ–≤–µ—Ç–µ –ø–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–µ—Ç–æ.
   - –î–µ—Ç–∞–π–ª–Ω–∏—è—Ç –º–æ–¥–∞–ª –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞ –ø—ä–ª–Ω–∏—è –∞–Ω–∞–ª–∏–∑ –≤ —Å–ø–µ—Ü–∏–∞–ª–Ω–∞ —Å–µ–∫—Ü–∏—è –Ω–∞–¥ —Å—ä–æ–±—â–µ–Ω–∏—è—Ç–∞.

---

## üîç SEMANTIC SEARCH ARCHITECTURE (IMPLEMENTED)

### üõ∞Ô∏è Option 1: Vertex AI Vector Search (Legacy Plan - Rejected due to cost)
- **Engine**: Google Cloud Vertex AI Vector Search (Matching Engine).
- **Pros**: Extreme scale, Google's ScaNN technology.@
- **Cons**: Expensive ($150+/mo), complex streaming index management.

### üöÄ Option 2: Supabase pgvector (Implemented)
- **Engine**: PostgreSQL extension `pgvector` –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ Supabase.
- **Workflow**:
  1. **Embeddings Generation**: –ü—Ä–∏ —Ä—ä—á–µ–Ω –∞–Ω–∞–ª–∏–∑ –Ω–∞ —á–∞—Ç (–±—É—Ç–æ–Ω Analyze), —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ —Å–µ –∏–∑–ø—Ä–∞—â–∞ –∫—ä–º Gemini `text-embedding-004`, –∫–æ–π—Ç–æ –≤—Ä—ä—â–∞ –≤–µ–∫—Ç–æ—Ä –æ—Ç 768 —á–∏—Å–ª–∞.
  2. **Storage**: –í–µ–∫—Ç–æ—Ä—ä—Ç —Å–µ –∑–∞–ø–∏—Å–≤–∞ –≤ –∫–æ–ª–æ–Ω–∞ `embedding` (—Ç–∏–ø `vector(768)`) –≤ —Ç–∞–±–ª–∏—Ü–∞ `chats`.
  3. **Indexing**: –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ `ivfflat` –∏–ª–∏ `hnsw` –∏–Ω–¥–µ–∫—Å –≤ Postgres –∑–∞ —Å–≤–µ—Ç–∫–∞–≤–∏—á–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ.
  4. **Search Flow**: 
     - –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –≤—ä–≤–µ–∂–¥–∞ "—Ñ—Ä–∞–∑–∞ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ" –≤ Dashboard.
     - –§—Ä–∞–∑–∞—Ç–∞ —Å–µ –ø—Ä–µ–≤—Ä—ä—â–∞ –≤—ä–≤ –≤–µ–∫—Ç–æ—Ä –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞.
     - –ò–∑–≤–∏–∫–≤–∞ —Å–µ RPC —Ñ—É–Ω–∫—Ü–∏—è –≤ Supabase, –∫–æ—è—Ç–æ —Å—Ä–∞–≤–Ω—è–≤–∞ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è —Å –≤—Å–∏—á–∫–∏ –≤–µ–∫—Ç–æ—Ä–∏ –≤ –±–∞–∑–∞—Ç–∞, —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–∏ –ø–æ `user_id`.
  5. **Results**: –í—Ä—ä—â–∞—Ç —Å–µ –Ω–∞–π-–ø–æ–¥—Ö–æ–¥—è—â–∏—Ç–µ —á–∞—Ç–æ–≤–µ, —Å–æ—Ä—Ç–∏—Ä–∞–Ω–∏ –ø–æ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∞ –±–ª–∏–∑–æ—Å—Ç.
- [x] **Real-time Sync (`DataProvider.tsx`)**: ‚úÖ –ì–æ—Ç–æ–≤–æ
    - –ò–∑–ø–æ–ª–∑–≤–∞ `supabase.channel` –∑–∞ —Å–ª—É—à–∞–Ω–µ –Ω–∞ `INSERT/UPDATE/DELETE`.
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ—Å–Ω—è–≤–∞ `useFolderStore` –∏ `usePromptStore`.
    - –ü—Ä–µ–º–∞—Ö–Ω–∞—Ç —Å—Ç–∞—Ä–∏—è `FolderProvider` –≤ –ø–æ–ª–∑–∞ –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω `DataProvider`.
- **Benefits**: –ù—É–ª–µ–≤–∞ —Ü–µ–Ω–∞ (—á–∞—Å—Ç –æ—Ç Supabase), –ª–µ—Å–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω–∏.

---

## ÔøΩüó∫Ô∏è 

## üìÇ SYSTEM ARCHITECTURE (V2.1.2)

### üîå Chrome Extension Logic
1. **Dynamic Menu System**:
   - **Data Sync**: `PromptSyncManager` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤–µ, –ø–∞–ø–∫–∏ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`quickAccessFolders`).
   - **Context Construction**: `DynamicMenus` –≥–µ–Ω–µ—Ä–∏—Ä–∞ –π–µ—Ä–∞—Ä—Ö–∏—á–Ω–æ –º–µ–Ω—é –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ.
   - **Quick Access**: –ü–æ–∫–∞–∑–≤–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 7 –∞–∫—Ç–∏–≤–Ω–∏ –ø—Ä–æ–º–ø—Ç–∞ –∏ –¥–æ 3 —Ç–æ–ø –ø–∞–ø–∫–∏.

2. **Smart Injection (`prompt-inject.js`)**:
   - **Simulated Input**: –ò–∑–ø–æ–ª–∑–≤–∞ `execCommand` –∏ —Å–∏–Ω—Ç–µ—Ç–∏—á–Ω–∏ —Å—ä–±–∏—Ç–∏—è –∑–∞ –∑–∞–æ–±–∏–∫–∞–ª—è–Ω–µ –Ω–∞ React –∑–∞—â–∏—Ç–∏.
   - **Compact Search**: –°–ø–µ—Ü–∏–∞–ª–µ–Ω overlay –∑–∞ –±—ä—Ä–∑–æ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞ –ø—Ä–æ–º–ø—Ç –±–µ–∑ –Ω–∞–ø—É—Å–∫–∞–Ω–µ –Ω–∞ –ø–æ–ª–µ—Ç–æ.

| File / Component | Purpose | Depends on |
| :--- | :--- | :--- |
| `apps/dashboard/src/lib/services/ai.ts` | Core AI Service (Gemini) | `GEMINI_API_KEY` (env) |
| `apps/extension/src/background/modules/dynamicMenus.ts` | Menu Generator | `chrome.contextMenus`, `PromptSyncManager` |
| `apps/extension/src/prompt-inject/prompt-inject.js` | Content Script / UI | `chrome.runtime.sendMessage`, `DOM API` |
| `packages/shared/src/logic/promptSync.ts` | Logic: Background Sync | `chrome.storage.local`, `Dashboard API` |

| `apps/dashboard/src/components/providers/DataProvider.tsx` | Real-time Data Hub | `Supabase Realtime`, `Zustand` |
| `packages/shared/src/types/database.ts` | **Centralized Types** | `Supabase Gen`, `Shared Interface` |

### üì¶ SHARED PACKAGE & TYPES (NEW)
–°—ä–∑–¥–∞–¥–µ–Ω–∞ –µ –Ω–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ —Å–ø–æ–¥–µ–ª—è–Ω–µ –Ω–∞ –∫–æ–¥ –º–µ–∂–¥—É `dashboard` –∏ `extension`:
- **Path**: `packages/shared`
- **Purpose**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ –º—è—Å—Ç–æ –∑–∞ —Ç–∏–ø–æ–≤–µ, –ª–æ–≥–∞ –∏ (–≤ –±—ä–¥–µ—â–µ) –≤–∞–ª–∏–¥–∞—Ü–∏—è.
- **Implementation**:
  - `database.types.ts` –µ –ø—Ä–µ–º–µ—Å—Ç–µ–Ω —Ç—É–∫.
  - `apps/dashboard/tsconfig.json` –∏–∑–ø–æ–ª–∑–≤–∞ alias `@brainbox/shared` -> `../../packages/shared`.
  - –¢–æ–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ frontend –∏ extension —Ä–∞–±–æ—Ç—è—Ç —Å –µ–¥–Ω–∏ –∏ —Å—ä—â–∏ –¥–µ—Ñ–∏–Ω–∏—Ü–∏–∏ –Ω–∞ –¥–∞–Ω–Ω–∏.

---

## üé≠ DAILY PROMPT CARD (GAMIFICATION)
1. **Animation State Machine**:
   - **Step 1: Unfrost** (0.5s) - –ü—Ä–µ–º–∞—Ö–≤–∞ blur –µ—Ñ–µ–∫—Ç–∞ –∏ overlay-–∞.
   - **Step 2: Start Delay** (1.2s) - –î–∞–≤–∞ –≤—Ä–µ–º–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –¥–∞ –≤–∏–¥–∏ –∑–∞–≥–ª–∞–≤–∏–µ—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞.
   - **Step 3: 3D Flip** (1.4s) - –û–±—Ä—ä—â–∞ –∫–∞—Ä—Ç–∞—Ç–∞, –∑–∞ –¥–∞ —Ä–∞–∑–∫—Ä–∏–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ.
2. **Persistence**:
   - –ü—Ä–∏ –ø—ä—Ä–≤–æ —Ä–∞–∑–∫—Ä–∏–≤–∞–Ω–µ –∑–∞ –¥–µ–Ω—è, –¥–∞—Ç–∞—Ç–∞ —Å–µ –∑–∞–ø–∏—Å–≤–∞ –≤ `localStorage` (`brainbox_daily_flipped_date`).
   - –ê–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –≤–ª–µ–∑–µ –æ—Ç–Ω–æ–≤–æ —Å—ä—â–∏—è –¥–µ–Ω, –∫–∞—Ä—Ç–∞—Ç–∞ –µ –≤–µ—á–µ "unfrosted" –∏ –æ–±—ä—Ä–Ω–∞—Ç–∞.
3. **Placeholder System**:
   - –§—É–Ω–∫—Ü–∏—è `formatPrompt` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç–∫—Ä–∏–≤–∞ —Ç–µ–∫—Å—Ç –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω–∏ —Å–∫–æ–±–∏ `[...]`.
   - –¢–µ–∑–∏ —Å–µ–≥–º–µ–Ω—Ç–∏ —Å–µ –æ–±–≤–∏–≤–∞—Ç –≤ `<span class="prompt-placeholder">` –∑–∞ –≤–∏–∑—É–∞–ª–µ–Ω –∞–∫—Ü–µ–Ω—Ç (–ö–µ—Ö–ª–∏–±–∞—Ä–µ–Ω Glow).

---

## ‚ö†Ô∏è –û–¢–õ–û–ñ–ï–ù–ò / –ü–†–ï–ú–ê–•–ù–ê–¢–ò
- [x] **Images Component**: –ü—Ä–µ–º–∞—Ö–Ω–∞—Ç –æ—Ç —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ (2026-01-27). –°–∫—Ä–∏—Ç –≤ Dashboard.
- [x] **Regex Chat Analysis**: –ó–∞–º–µ–Ω–µ–Ω –æ—Ç Gemini API (2026-02-01). ‚úÖ
- [ ] **AVIF Conversion**: –û—Ç–ª–æ–∂–µ–Ω–æ.
- [ ] **Offline Mode**: –ü–ª–∞–Ω–∏—Ä–∞–Ω–æ –∑–∞ Phase 10.
