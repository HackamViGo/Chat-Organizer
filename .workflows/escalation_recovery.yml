version: "2.1"
name: "Escalation & Recovery Handler"

strategies:
  test_failure_loop:
    trigger: "integration_test_failed"
    max_retries: 2
    actions:
      - command: "python meta_architect/scripts/project_health_check.py --mode environment"
      - command: "pnpm run docker:restart"
      
  architectural_drift:
    trigger: "health_score_drop > 10"
    actions:
      - command: "python meta_architect/scripts/project_planner.py --replan"
    severity: CRITICAL

  identity_lock_violation:
    trigger: "unauthorized_modification_priority_1"
    actions:
      - command: "python meta_architect/scripts/state_manager.py --action block"
      - command: "python meta_architect/scripts/graph_query.py --action restore_node"

steps:
  - id: execute_recovery
    action: sequence
    on_failure: "human_in_the_loop_intervention"
